---
layout: post
title: Linux用户与用户组管理
categories : [技术,linux]
tags : [linux]
kw : linux,linux用户,linux用户组,linux用户组管理,linux用户管理 
---

Linux 为系统默认配置了N多的用户 它们都保存在/etc/passwd文件中。如下图

![]({{site.staticUrl1}}/images/2015/09/2015-09-05-linux.usergroupmanager-1.png)

每一个用户由 **用户名：密码：用户标识：组标识:描述:所属目录:shell** 7个字段组合而成,其中密码是加密的 使用X字符替代。这些用户都是系统内置的 shell字段为/sbin/nologin时 这个用户是不可登陆的。只是为了完成一些独有的功能而存在。

由于密码是加密的那么/etc/shadow文件专门用来保存用户的密码信息。

另外介绍一个用户组文件信息是保存在/etc/group 文件中的。


##用户管理##
`useradd` **添加用户**  

 {% highlight HTML %}
[root@localhost ~]# useradd --help
Usage: useradd [options] LOGIN

Options:
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping  
 {% endhighlight %}

 例如：
  
 ` useradd -c 'this a comment'  abcabc` 添加一个用户abcabc 

 `cat /etc/passwd`查看用户信息文件

 ` abcabc:x:503:504:this a comment:/home/abcabc:/bin/bash` abcabc添加成功。

为abcabc用户设置密码passwd abcabc 注意*如果passwd命令后不输入用户名 则默认修改当前登陆用户的密码*

 {% highlight HTML %}
	passwd abcabc
 {% endhighlight %}

添加用户同时指定一个普通用户组 如系统中已存在用户组shareGroup

 {% highlight HTML %}
 useradd -c 'this a comment'  abcabc -G shareGroup
 {% endhighlight %}


`usermod` **修改用户**

 {% highlight HTML %}
  usermod -l abc abcabc      修改用户名abcabc为abc
  usermod -G share2          添加一个用户组share2
  usermod -L abc             锁定abc用户
  usermod -U abc             为abc用户解除锁定状态

 {% endhighlight %}

`userdel` **删除用户**

 {% highlight HTML %}
	userdel abc 删除用户abc 不会删除用户的所属文件目录
    userdel -r abc 删除用户abc 同时会删除用户所属的文件目录
 {% endhighlight %}


##用户组管理##

`groupadd` **添加组**

 groupadd  ugroup1    添加用户组ugroup1

 `groupmod`    **修改用户组**

 `groupdel` **删除组**

  groupdel ugroup1   删除用户组ugroup1

用户组与用户管理的操作差不多是一样的。不在一一说明。






