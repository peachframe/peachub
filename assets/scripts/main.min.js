!function(e,t){var n=t.body,i=t.getElementById("gotop"),s=t.getElementById("menu"),o=t.getElementById("header"),a=t.getElementById("mask"),d=t.getElementById("menu-toggle"),r=t.getElementById("menu-off"),l=t.getElementById("loading"),c=e.requestAnimationFrame,f=navigator.userAgent,u=f.indexOf("Mobile")!==-1||f.indexOf("Android")!==-1||f.indexOf("iPhone")!==-1||f.indexOf("iPad")!==-1||f.indexOf("KFAPWI")!==-1,v=u?"touchstart":"click",g=function(){},m=function(e){var t=e.offsetLeft,n=e.offsetTop;if(e.offsetParent){var i=arguments.callee(e.offsetParent);t+=i.x,n+=i.y}return{x:t,y:n}},h=f.indexOf("Firefox")!==-1?t.documentElement:n,L={goTop:function(){var e=h.scrollTop;e>400?(h.scrollTop=e-400,c(arguments.callee)):h.scrollTop=0},toggleGotop:function(t){t>e.innerHeight/2?i.classList.add("in"):i.classList.remove("in")},toggleMenu:function(t){t?(s.classList.remove("hide"),e.innerWidth<1241&&(a.classList.add("in"),s.classList.add("show"))):(s.classList.remove("show"),a.classList.remove("in"))},fixedHeader:function(e){e>o.clientHeight?o.classList.add("fixed"):o.classList.remove("fixed")},fixedToc:function(){function n(e){for(var t,n=0,s=r.length;n<s;n++)e>m(r[n]).y&&(t=r[n].id);var e=l-i.querySelectorAll('a[href="#'+t+'"]')[0].offsetTop;i.style.top=(e<c?c:e)+"px"}var i=t.getElementById("post-toc");if(!i)return g;var s=m(i),o=s.y,a=i.offsetHeight,d=a>e.innerHeight,r=t.getElementById("post-content").querySelectorAll("h1, h2, h3, h4, h5, h6"),l=150,c=-1*(a-e.innerHeight)-l;return function(e){e>o?(i.classList.add("fixed"),d&&n(e)):i.classList.remove("fixed")}}(),share:function(){function n(t){e.open(encodeURI(d.replace("{service}",t)))}function i(){a.classList.add("in"),r.classList.add("in")}function s(){r.classList.remove("in"),a.classList.remove("in")}var o,d,r=t.getElementById("global-share"),l=t.getElementById("menu-share"),c=t.createElement("div"),f=t.getElementsByClassName("share-sns");c.innerHTML=BLOG_SHARE.summary,o=c.innerText,c=void 0,d="http://www.jiathis.com/send/?webid={service}&url="+BLOG_SHARE.url+"&title="+BLOG_SHARE.title+"&summary="+o+"&pic="+location.protocol+"//"+location.host+BLOG_SHARE.pic,[].forEach.call(f,function(e){e.addEventListener("click",function(){n(this.dataset.service)},!1)}),l.addEventListener(v,function(){i()},!1),a.addEventListener(v,function(){s()},!1)},search:function(){function e(){n.classList.toggle("in")}var n=t.getElementById("search-wrap");t.getElementById("search").addEventListener(v,e),t.getElementById("search").addEventListener(v,e)}};s.addEventListener("touchmove",function(e){e.preventDefault()}),e.addEventListener("load",function(){l.classList.remove("active")}),e.addEventListener("resize",function(){L.toggleMenu()}),i.addEventListener(v,function(){c(L.goTop)},!1),d.addEventListener(v,function(e){L.toggleMenu(!0),e.preventDefault()},!1),r.addEventListener(v,function(){s.classList.add("hide")},!1),a.addEventListener(v,function(){L.toggleMenu()},!1),t.addEventListener("scroll",function(){var e=h.scrollTop;L.toggleGotop(e),L.fixedHeader(e),L.fixedToc(e)},!1),"undefined"!=typeof BLOG_SHARE&&L.share(),Waves.init(),Waves.attach(".global-share li",["waves-block"]),Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"])}(window,document);